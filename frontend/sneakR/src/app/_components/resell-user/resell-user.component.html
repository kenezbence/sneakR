<body>
    <!-- Navig√°ci√≥s s√°v -->
    <nav class="navbar">
        <div class="navbar-container">
            <button class="menu-toggle" (click)="toggleMenu()">‚ò∞</button>
            <ul [class.open]="menuOpen">
                <li><a [routerLink]="['/resell']">‚Üê</a></li>
                <li><a [routerLink]="['/resell-user']" class="active">Profil</a></li>
                <li><a (click)="scroll(currentListings)">Jelenlegi Hirdet√©sek</a></li>
                <li><a (click)="scroll(pastListings)">Kor√°bbi Hirdet√©sek</a></li>
                <li><a (click)="scroll(purchasedItems)">V√°s√°rolt Term√©kek</a></li>
                <li *ngIf="user.admin === 'igen'">
                    <a [routerLink]="['/admin']">Felhaszn√°l√≥k kezel√©se</a>
                </li>
                <li *ngIf="user.admin === 'igen'">
                    <a [routerLink]="['/shoe-controller']">Cip≈ëk kezel√©se</a>
                </li>
                <li><a [routerLink]="['/login']">Kijelentkez√©s</a></li>
            </ul>
        </div>
    </nav>

    <!-- Felhaszn√°l√≥i Profil -->
    <section id="profile" class="profile-section">
        <header>
            <h1>√údv√∂z√∂llek, <span style="color: #2A7B47;">{{ user.nev || 'Felhaszn√°l√≥' }}</span>!</h1>
            <div class="profile-info">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRrAIH5ePjPpc06-hopmyUZNsVbBPvZA0XGmQ&s"
                    alt="Profilk√©p" class="avatar">
                <p>üìß {{ user.email }}</p>
                <!-- <p>üåü Akt√≠v hirdet√©sek: {{ userShoes.length }} | üõçÔ∏è Eladott term√©kek: 3</p> -->
                <p>üåü Akt√≠v hirdet√©sek: {{ user.activeListingsCount }} | üõçÔ∏è Eladott term√©kek: {{ user.soldItemsCount }}</p>
            </div>
        </header>
    </section>

    <!-- Jelenlegi Hirdet√©sek -->
    <section #currentListings id="current-listings" class="listings-section">
        <h2>Jelenlegi Hirdet√©sek</h2>
        <div class="slider-container">
            <button class="slider-arrow prev" (click)="prevSlide()" [disabled]="currentSlide === 0">
                &lt;
            </button>
    
            <div class="slider-wrapper">
                <div class="slider-track" [style.transform]="'translateX(-' + (currentSlide * 100) + '%)'">
                    <div *ngFor="let slide of slides" class="slide">
                        <div *ngFor="let shoe of slide" class="card">
                            <div class="card-img-container">
                                <img [src]="shoe.img" [alt]="shoe.nev">
                            </div>
                            <div class="card-content">
                                <h3>{{ shoe.nev }}</h3>
                                <p>üí∞ √År: {{ shoe.ar | currency:'HUF':'symbol':'1.0-0' }}</p>
                                <p>üè∑Ô∏è √Ållapot: {{ shoe.allapot }}</p>
                                <p>üëü M√©ret: {{ shoe.meret }}</p>
                                <button (click)="deleteListing(shoe.id, $event)" class="delete-btn">
                                    üóëÔ∏è T√∂rl√©s
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <button class="slider-arrow next" (click)="nextSlide()" [disabled]="currentSlide === maxSlides">
                &gt;
            </button>
        </div>
<div *ngIf="user.activeListingsCount  === 0" class="empty-state">
    Jelenleg nincs eladott term√©ked!
</div>
    </section>

    <!-- Kor√°bbi Hirdet√©sek -->
    <!-- <section #pastListings id="past-listings" class="listings-section">
        <h2>Kor√°bbi Hirdet√©sek</h2>
        <div class="card-grid">
            <div class="card">
                <div class="card-img-container">
                    <img src="https://sneakcenter.com/cdn/shop/products/nike-dunk-low-lottery-grey-sneakcenter-1-34784944488715.png?v=1701593658" alt="Nike Dunk Low">
                </div>
                <div class="card-content">
                    <h3>Nike Dunk Low</h3>
                    <p>‚è≥ Elkelt: 2024-11-15</p>
                    <p>üí∏ V√©gs≈ë √°r: 25,000 Ft</p>
                </div>
            </div>
        </div> -->
        <!-- <div class="empty-state">
            Nincsenek kor√°bbi hirdet√©sek
        </div>
    </section>  -->

    <section #pastListings id="past-listings" class="listings-section">
        <h2>Kor√°bbi Hirdet√©sek</h2>
        <div class="card-grid">
            <div *ngFor="let shoe of pastListingsData" class="card">
                <!-- Same card structure as current listings -->
                <div class="card-content">
                    <h3>{{ shoe.nev }}</h3>
                    <div class="card-img-container-past">
                        <img [src]="shoe.img" [alt]="shoe.nev">
                    </div>
                    <br>
                    <!-- <p>‚è≥ Elkelt: {{ shoe.soldDate | date }}</p> -->
                    <p>üí∏ V√©gs≈ë √°r: {{ shoe.ar | currency:'HUF':'symbol':'1.0-0' }}</p>
                </div>
            </div>
            <div *ngIf="user.soldItemsCount  === 0" class="empty-state">
                Jelenleg nincs eladott term√©ked!
            </div>
        </div>
    </section>

    <!-- V√°s√°rolt Term√©kek -->
    <section #purchasedItems id="purchased-items" class="listings-section">
        <h2>V√°s√°rolt Term√©kek</h2>
        <div class="card-grid">
            <div *ngFor="let shoe of purchasedShoes" class="card">
                <div class="card-img-container">
                    <img [src]="shoe.img" [alt]="shoe.nev">
                </div>
                <div class="card-content">
                    <h3>{{ shoe.nev }}</h3>
                    <p>üí∞ √År: {{ shoe.ar | currency:'HUF':'symbol':'1.0-0' }}</p>
                    <p>üè∑Ô∏è M√°rka: {{ shoe.marka }}</p>
                    <p>üëü M√©ret: {{ shoe.meret }}</p>
                </div>
                <div class="details-btn-container">
                    <button (click)="showOrderDetails()" class="details-btn">
                        üì¶ R√©szletek
                    </button>
                </div>
            </div>
            <div *ngIf="purchasedShoes.length === 0" class="empty-state">
                <div class="details-btn-container">
                    <button (click)="showOrderDetails()" class="details-btn">
                        üì¶ R√©szletek
                    </button>
                </div>
            </div>
        </div>
    </section>

    <div *ngIf="showOrderModal" class="order-modal">
        <div class="modal-content">
            <span class="close" (click)="closeOrderDetails()">&times;</span>
            <h2>Rendel√©s r√©szletei</h2>
            <div *ngFor="let order of selectedOrderDetails" class="order-detail">
                <div>
                    <strong>Rendel√©s d√°tuma:</strong>
                    <span>{{ order.rendelesDatum }}</span>
                
                    <strong>√Ållapot:</strong>
                    <span>{{ order.rendelesAllapot }} <span class="status-badge">{{ order.rendelesAllapot }}</span></span>
                
                    <strong>√ñsszeg:</strong>
                    <span class="osszeg">{{ order.osszeg | currency:'HUF':'symbol':'1.0-0' }}</span>
                </div>
                <div class="address-block" *ngIf="order.address">
                    <p>Sz√°ll√≠t√°si c√≠m</p>
                    <p>{{ order.address.varos }}, {{ order.address.utcaHazszam }}</p>
                    <p>üìÆ {{ order.address.iranyitoszam }}</p>
                    <p *ngIf="order.address.telefonszam">üì± {{ order.address.telefonszam }}</p>
                </div>
                <div *ngIf="!order.address" class="no-address">
                    ‚ÑπÔ∏è Nincs el√©rhet≈ë sz√°ll√≠t√°si c√≠m
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="showDeleteConfirmation" class="delete-confirmation-modal">
        <div class="modal-content">
            <p id="delete-popup">Biztosan t√∂r√∂lni szeretn√©d ezt a cip≈ët?</p>
            <div class="modal-actions">
                <button (click)="confirmDelete()" class="btn-confirm">Igen</button>
                <button (click)="cancelDelete()" class="btn-cancel">M√©gse</button>
            </div>
        </div>
    </div>
</body>